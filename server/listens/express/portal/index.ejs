<!DOCTYPE html>
<html amp lang="<%= language %>">
  <head>
    <title>talkn</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"
    />
    <meta name="theme-color" content="rgb(79, 174, 159)" />
    <meta
      name="description"
      content="talkn can share comments with users watching the same WEB page. Please enjoy the world of fun talkn."
    />
    <meta name="keywords" content="talkn" />
    <meta name="title" content="talkn" />
    <meta name="”robots”" content="”index,nofollow,noarchive”" />

    <meta property="og:title" content="talkn" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://<%= domain %>" />
    <meta property="og:image" content="https://<%= assetsURL %>/img/talkn_logo1.png" />
    <meta property="og:site_name" content="talkn" />
    <meta
      property="og:description"
      content="talkn can share comments with users watching the same WEB page. Please enjoy the world of fun talkn."
    />
    <meta property="fb:page_id" content="641091596303567" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@IoTalkn" />
    <meta name="twitter:url" content="https://<%= domain %>" />
    <meta name="twitter:title" content="talkn" />
    <meta
      name="twitter:description"
      content="talkn can share comments with users watching the same WEB page. Please enjoy the world of fun talkn."
    />
    <meta name="twitter:image" content="https://<%= assetsURL %>/img/talkn_logo1.png" />

    <link rel="manifest" href="https://<%= domain %>/manifest.json" />
    <link rel="shortcut icon" href="https://<%= assetsURL %>/favicon.ico" />
    <link rel="canonical" href="https://<%= domain %>/" />
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <script id="talknClient" async type="text/javascript" src="https://<%= clientURL %>"></script>
    <script type="text/javascript">
      const onServiceWorker = () => {
        if ("serviceWorker" in navigator) {
          navigator.serviceWorker
            .register("/portal_sw.js")
            .then(function (registration) {
              console.log("[ServiceWorker] suscessful: ", registration.scope);
            })
            .catch(function (err) {
              console.log("[ServiceWorker] failed: ", err);
            });
        }
      };

      onServiceWorker();

      // 自分自身がwindow.top(iframeで読み込まれていない)の場合
      if (window == window.parent) {
        const apiScript = document.createElement("script");
        apiScript.setAttribute("id", "talknApi");
        apiScript.setAttribute("async", true);
        apiScript.setAttribute("type", "text/javascript");
        apiScript.setAttribute("src", "https://<%= apiAccessURL %>");
        document.head.appendChild(apiScript);
      }
    </script>
    <noscript key="noscript">Your browser does not support JavaScript!</noscript>
    <style amp-boilerplate>
      body {
        -webkit-animation: -amp-start 8s steps(1, end) 0s 1 normal both;
        -moz-animation: -amp-start 8s steps(1, end) 0s 1 normal both;
        -ms-animation: -amp-start 8s steps(1, end) 0s 1 normal both;
        animation: -amp-start 8s steps(1, end) 0s 1 normal both;
      }
      @-webkit-keyframes -amp-start {
        from {
          visibility: hidden;
        }
        to {
          visibility: visible;
        }
      }
      @-moz-keyframes -amp-start {
        from {
          visibility: hidden;
        }
        to {
          visibility: visible;
        }
      }
      @-ms-keyframes -amp-start {
        from {
          visibility: hidden;
        }
        to {
          visibility: visible;
        }
      }
      @-o-keyframes -amp-start {
        from {
          visibility: hidden;
        }
        to {
          visibility: visible;
        }
      }
      @keyframes -amp-start {
        from {
          visibility: hidden;
        }
        to {
          visibility: visible;
        }
      }
      @keyframes logo {
        0% {
          transform: scale(1) translate3d(0px, 0px, 0px);
          opacity: 1;
        }
        50% {
          transform: scale(0.9) translate3d(0px, 0px, 0px);
          opacity: 1;
        }
        100% {
          transform: scale(1) translate3d(0px, 0px, 0px);
          opacity: 1;
        }
      }
      #talkn {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100vw;
        height: 100vh;
        background: url("https://<%= assetsURL %>/img/talkn_logo2.svg") 50% 40% / 128px no-repeat;
        animation-name: logo;
        animation-duration: 1500ms;
        animation-iteration-count: infinite;
        transition: 600ms;
      }
    </style>
    <noscript
      ><style amp-boilerplate>
        body {
          -webkit-animation: none;
          -moz-animation: none;
          -ms-animation: none;
          animation: none;
        }
      </style></noscript
    >
  </head>
  <body>
    <div id="talkn"></div>
  </body>
</html>
