<!DOCTYPE html>
<html amp lang="<%= language %>">
  <head>
    <title>talkn</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"
    />
    <meta name="theme-color" content="rgb(79, 174, 159)" />
    <meta
      name="description"
      content="talkn can share comments with users watching the same WEB page. Please enjoy the world of fun talkn."
    />
    <meta name="keywords" content="talkn" />
    <meta name="title" content="talkn" />
    <meta name="”robots”" content="”index,nofollow,noarchive”" />

    <meta property="og:title" content="talkn" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://<%= domain %>" />
    <meta property="og:image" content="https://<%= assetsURL %>/img/talkn_logo1.png" />
    <meta property="og:site_name" content="talkn" />
    <meta
      property="og:description"
      content="talkn can share comments with users watching the same WEB page. Please enjoy the world of fun talkn."
    />
    <meta property="fb:page_id" content="641091596303567" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@IoTalkn" />
    <meta name="twitter:url" content="https://<%= domain %>" />
    <meta name="twitter:title" content="talkn" />
    <meta
      name="twitter:description"
      content="talkn can share comments with users watching the same WEB page. Please enjoy the world of fun talkn."
    />
    <meta name="twitter:image" content="https://<%= assetsURL %>/img/talkn_logo1.png" />

    <link rel="manifest" href="https://<%= domain %>/manifest.json" />
    <link rel="shortcut icon" href="https://<%= assetsURL %>/favicon.ico" />
    <link rel="canonical" href="https://<%= domain %>/" />
    <script async src="https://cdn.ampproject.org/v0.js"></script>

    <script type="text/javascript">
      const onServiceWorker = () => {
        if ("serviceWorker" in navigator) {
          navigator.serviceWorker
            .register("/portal_sw.js")
            .then(function (registration) {
              console.log("[ServiceWorker] suscessful: ", registration.scope);
            })
            .catch(function (err) {
              console.log("[ServiceWorker] failed: ", err);
            });
        }
      };

      onServiceWorker();
      window.name = window.name ? window.name : "global";
      const includeIframeTag = "<%= includeIframeTag %>" ? "<%= includeIframeTag %>" : true;

      // load api script.
      if (window.name === "global") {
        const apiScript = document.createElement("script");
        apiScript.setAttribute("id", "talkn");
        apiScript.setAttribute("type", "text/javascript");
        apiScript.setAttribute("src", "https://<%= apiAccessURL %>");
        document.head.appendChild(apiScript);
      }

      let ch = location.href.replace(location.origin, "");
      let hasSlash = ch.lastIndexOf("/") === ch.length - 1;
      ch = hasSlash ? ch : ch + "/";

      const clientScript = document.createElement("script");
      clientScript.setAttribute("id", "talkn");
      clientScript.setAttribute("type", "text/javascript");
      clientScript.setAttribute("src", "https://<%= clientURL %>");
      clientScript.setAttribute("ch", ch);
      clientScript.setAttribute("hasSlash", hasSlash);
      clientScript.setAttribute("width", "320px");
      clientScript.setAttribute("includeIframeTag", includeIframeTag);
      document.head.appendChild(clientScript);
    </script>
    <noscript key="noscript">Your browser does not support JavaScript!</noscript>
    <style amp-boilerplate>
      body {
        -webkit-animation: -amp-start 8s steps(1, end) 0s 1 normal both;
        -moz-animation: -amp-start 8s steps(1, end) 0s 1 normal both;
        -ms-animation: -amp-start 8s steps(1, end) 0s 1 normal both;
        animation: -amp-start 8s steps(1, end) 0s 1 normal both;
      }
      @-webkit-keyframes -amp-start {
        from {
          visibility: hidden;
        }
        to {
          visibility: visible;
        }
      }
      @-moz-keyframes -amp-start {
        from {
          visibility: hidden;
        }
        to {
          visibility: visible;
        }
      }
      @-ms-keyframes -amp-start {
        from {
          visibility: hidden;
        }
        to {
          visibility: visible;
        }
      }
      @-o-keyframes -amp-start {
        from {
          visibility: hidden;
        }
        to {
          visibility: visible;
        }
      }
      @keyframes -amp-start {
        from {
          visibility: hidden;
        }
        to {
          visibility: visible;
        }
      }
      @keyframes logo {
        0% {
          transform: scale(0.95) translate3d(0px, 0px, 0px);
          opacity: 1;
        }
        50% {
          transform: scale(1.05) translate3d(0px, 0px, 0px);
          opacity: 1;
        }
        100% {
          transform: scale(0.95) translate3d(0px, 0px, 0px);
          opacity: 1;
        }
      }
      #talkn {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100vw;
        height: 100vh;
      }
      .logo {
        position: relative;
        top: -50px;
        animation-name: logo;
        animation-duration: 2000ms;
        animation-iteration-count: infinite;
        border-radius: 300px;
        width: 128px;
        height: 128px;
        transition: 600ms;
        background: url(//assets.localhost/img/talkn_logo2.svg) 50% 50% / 128px no-repeat;
      }
    </style>
    <noscript
      ><style amp-boilerplate>
        body {
          -webkit-animation: none;
          -moz-animation: none;
          -ms-animation: none;
          animation: none;
        }
      </style></noscript
    >
  </head>
  <body>
    <div id="talkn">
      <div class="logo"></div>
    </div>
  </body>
</html>
