{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport * as React from 'react';\nimport { useRecoilState } from 'recoil';\nimport { UrlState } from 'state';\nimport styled from 'styled-components';\nimport ImageSliderList from 'components/molecules/ImageSliderList';\nimport StylesVars from 'styles/StylesVars';\nimport { LocalStorageKeys } from 'utils/Constants';\nimport { urlToCh } from 'utils/Func';\nimport { talknScriptHost } from 'utils/Networks';\n\nconst getLayout = (isSpLayout, fixed) => {\n  return isSpLayout ? imageSectionNarrowLayouts[Number(fixed)] : imageSectionLayouts[Number(fixed)];\n};\n\nconst activeScrollCnt = 5;\nlet scrollCnt = 0;\n\nconst getImageSliderUrl = e => {\n  const imageScroll = e.target;\n  const scrollLeft = imageScroll !== null && imageScroll !== void 0 && imageScroll.scrollLeft ? imageScroll === null || imageScroll === void 0 ? void 0 : imageScroll.scrollLeft : 0;\n  const clientWidth = imageScroll !== null && imageScroll !== void 0 && imageScroll.clientWidth ? imageScroll === null || imageScroll === void 0 ? void 0 : imageScroll.clientWidth : 0;\n  const index = Math.ceil(scrollLeft / clientWidth);\n  const imageScrollLi = document.querySelectorAll('.imageSlider ol li')[index];\n  return imageScrollLi ? String(imageScrollLi.dataset.url) : '';\n};\n\nconst ImageSlider = props => {\n  const [url, setUrl] = useRecoilState(UrlState);\n  const {\n    contents,\n    isSpLayout,\n    isFixedSmallNav\n  } = props;\n  const layout = getLayout(isSpLayout, isFixedSmallNav);\n  const [scrollingId, setScrolligId] = React.useState(0);\n  const scrollElm = React.useRef();\n  const scrollElmRef = React.useCallback(node => scrollElm.current = node, []);\n\n  const onScrollEnd = e => {\n    if (scrollCnt >= activeScrollCnt) {\n      const iframeContainer = document.querySelector('#talknLiveMedia');\n      const iframe = document.querySelector('#talknLiveMedia iframe');\n      const url = getImageSliderUrl(e);\n      setUrl(url);\n      iframeContainer.dataset.url = url;\n      iframe.src = `https://${talknScriptHost}${urlToCh(url)}`;\n      localStorage.setItem(LocalStorageKeys.url, url);\n    }\n  };\n\n  const onScroll = e => {\n    if (scrollingId === 0) {\n      scrollCnt = 0;\n    } else {\n      scrollCnt = scrollCnt + 1;\n      clearTimeout(scrollingId);\n    }\n\n    setScrolligId(Number(setTimeout(() => onScrollEnd(e), 100)));\n  }; // change url.\n\n\n  React.useEffect(() => {\n    if (scrollElm.current && scrollElm.current.children && url !== '') {\n      const scrollOrder = scrollElm.current;\n      const index = Array.from(scrollOrder.children).findIndex(child => {\n        const liUrl = String(child.getAttribute('data-url'));\n        return liUrl === url;\n      });\n      const oneScroll = Math.round(scrollOrder.scrollWidth / scrollElm.current.children.length);\n      scrollOrder.scrollTo(oneScroll * index, 0);\n    }\n  }, [url]);\n  return /*#__PURE__*/_jsx(Container, {\n    className: \"imageSlider\",\n    isSpLayout: isSpLayout,\n    isFixedSmallNav: isFixedSmallNav,\n    children: /*#__PURE__*/_jsx(ImageOrderList, {\n      ref: scrollElmRef,\n      onScroll: onScroll,\n      children: Array.from(contents).map((content, index) => {\n        const bg = content.image ? `${content.image.thumbnail.contentUrl}&w=300&dpr=2&qlt=190` : undefined;\n        return /*#__PURE__*/_jsx(ImageSliderList, {\n          name: content.name,\n          description: content.description,\n          provider: content.provider[0]['name'],\n          url: content.url,\n          layout: layout,\n          bg: bg\n        }, `${content.url}_${index}`);\n      })\n    })\n  });\n};\n\nexport default ImageSlider;\nconst Container = styled.section.withConfig({\n  displayName: \"ImageSlider__Container\",\n  componentId: \"t3huta-0\"\n})([\"position:\", \";top:\", \"px;z-index:80;width:100%;height:\", \"px;min-height:\", \"px;max-height:300px;margin:0 auto;overflow:hidden;cursor:pointer;transition:\", \";ol{width:100%;max-width:\", \"px;margin:0 auto;}\"], props => props.isFixedSmallNav ? 'fixed' : 'relative', props => props.isFixedSmallNav ? Number(StylesVars.baseHeight) + Number(StylesVars.baseHeight) / 2 : 0, props => props.isFixedSmallNav ? Number(StylesVars.baseHeight) * 2 : Number(StylesVars.baseHeight) * 5, Number(StylesVars.baseHeight) * 2, StylesVars.transitionDuration, StylesVars.maxWidth);\nconst ImageOrderList = styled.ol.withConfig({\n  displayName: \"ImageSlider__ImageOrderList\",\n  componentId: \"t3huta-1\"\n})([\"display:flex;flex-flow:row nowrap;width:100%;height:100%;overflow-x:scroll;overflow-y:hidden;background:rgb(0,0,0);border-top:1px solid \", \";border-bottom:1px solid #000;scroll-snap-type:x mandatory;scroll-snap-points-x:repeat(100%);\"], StylesVars.borderColor);\nconst imageSectionNarrowLayouts = [{\n  size: 300,\n  style: {\n    ImageList: {\n      bgPosition: 0\n    },\n    ImageListContent: {\n      width: '60%',\n      height: 'auto',\n      paddingTop: '0px',\n      paddingRight: '10px',\n      paddingBottom: '10px',\n      paddingLeft: '0px',\n      marginTop: '20px',\n      marginRight: '0px',\n      marginBottom: '0px',\n      marginLeft: 'auto',\n      borderRadius: '3px 0 0 3px'\n    },\n    ImageListContentUpper: {\n      height: 'auto',\n      whiteSpace: 'normal'\n    },\n    ImageListTitle: {\n      marginTop: '10px',\n      marginRight: '0px',\n      marginBottom: '10px',\n      marginLeft: '10px',\n      fontSize: '13px'\n    },\n    ImageListDesc: {\n      display: 'block',\n      height: 'auto',\n      paddingTop: '0px',\n      paddingRight: '0px',\n      paddingBottom: '0px',\n      paddingLeft: '20px',\n      fontSize: '10px'\n    },\n    ImageListProviderTop: {\n      display: 'none',\n      height: '30px',\n      fontSize: '10px'\n    },\n    ImageListProviderBottom: {\n      display: 'inline-flex',\n      height: '30px',\n      fontSize: '10px'\n    }\n  }\n}, {\n  size: 120,\n  style: {\n    ImageList: {\n      bgPosition: 0\n    },\n    ImageListContent: {\n      width: '80%',\n      height: '100%',\n      paddingTop: '0px',\n      paddingRight: '10px',\n      paddingBottom: '20px',\n      paddingLeft: '10px',\n      marginTop: '0px',\n      marginRight: '0px',\n      marginBottom: '0px',\n      marginLeft: 'auto',\n      borderRadius: '0'\n    },\n    ImageListContentUpper: {\n      height: 'auto',\n      whiteSpace: 'normal'\n    },\n    ImageListTitle: {\n      marginTop: '8px',\n      marginRight: '0px',\n      marginBottom: '0px',\n      marginLeft: '0px',\n      fontSize: '13px'\n    },\n    ImageListDesc: {\n      display: 'block',\n      height: '50px',\n      paddingTop: '5px',\n      paddingRight: '0px',\n      paddingBottom: '0px',\n      paddingLeft: '0px',\n      fontSize: '10px'\n    },\n    ImageListProviderTop: {\n      display: 'none',\n      height: '26px',\n      fontSize: '10px'\n    },\n    ImageListProviderBottom: {\n      display: 'none',\n      height: '34px',\n      fontSize: '10px'\n    }\n  }\n}];\nconst imageSectionLayouts = [{\n  size: 300,\n  style: {\n    ImageList: {\n      bgPosition: 60\n    },\n    ImageListContent: {\n      width: '60%',\n      height: 'auto',\n      paddingTop: '0px',\n      paddingRight: '20px',\n      paddingBottom: '20px',\n      paddingLeft: '0px',\n      marginTop: '20px',\n      marginRight: '20px',\n      marginBottom: '0px',\n      marginLeft: 'auto',\n      borderRadius: '3px'\n    },\n    ImageListContentUpper: {\n      height: 'auto',\n      whiteSpace: 'normal'\n    },\n    ImageListTitle: {\n      marginTop: '20px',\n      marginRight: '0px',\n      marginBottom: '20px',\n      marginLeft: '20px',\n      fontSize: '18px'\n    },\n    ImageListDesc: {\n      display: 'block',\n      height: 'auto',\n      paddingTop: '0px',\n      paddingRight: '0px',\n      paddingBottom: '0px',\n      paddingLeft: '20px',\n      fontSize: '13px'\n    },\n    ImageListProviderTop: {\n      display: 'none',\n      height: '30px',\n      fontSize: '13px'\n    },\n    ImageListProviderBottom: {\n      display: 'inline-flex',\n      height: '30px',\n      fontSize: '13px'\n    }\n  }\n}, {\n  size: 120,\n  style: {\n    ImageList: {\n      bgPosition: 10\n    },\n    ImageListContent: {\n      width: '80%',\n      height: '100%',\n      paddingTop: '0px',\n      paddingRight: '0px',\n      paddingBottom: '20px',\n      paddingLeft: '0px',\n      marginTop: '0px',\n      marginRight: '20px',\n      marginBottom: '0px',\n      marginLeft: 'auto',\n      borderRadius: '0'\n    },\n    ImageListContentUpper: {\n      height: '34px',\n      whiteSpace: 'normal'\n    },\n    ImageListTitle: {\n      marginTop: '10px',\n      marginRight: '0px',\n      marginBottom: '0px',\n      marginLeft: '0px',\n      fontSize: '15px'\n    },\n    ImageListDesc: {\n      display: 'block',\n      height: '70px',\n      paddingTop: '10px',\n      paddingRight: '0px',\n      paddingBottom: '0px',\n      paddingLeft: '20px',\n      fontSize: '13px'\n    },\n    ImageListProviderTop: {\n      display: 'inline-flex',\n      height: '26px',\n      fontSize: '13px'\n    },\n    ImageListProviderBottom: {\n      display: 'none',\n      height: '26px',\n      fontSize: '13px'\n    }\n  }\n}];","map":null,"metadata":{},"sourceType":"module"}